(this["webpackJsonpto-do-hooks"]=this["webpackJsonpto-do-hooks"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t),n.d(t,"theme",(function(){return he}));var r=n(14),a=n(5),c=n(60),o=n.n(c),i=n(0),s=n.n(i),u=n(27),d=n.n(u),l=n(139),j=n(53),h=n(73),b=n(64),f=n(136),p=n(137),O=n(141),x=n(61),g=n(80),m=n(12),k=n.n(m),v=n(21),w="http://localhost:4000",y="undefined"===typeof window,C=function(){return 1e3*(2*Math.random()+1)},L=function(){var e=Object(v.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=10;break}return e.next=3,fetch("".concat(w,"/tasks"));case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,t.ok){e.next=9;break}throw new Error(n);case 9:return e.abrupt("return",n);case 10:return e.abrupt("return",new Promise((function(e,t){var n=localStorage.getItem("tasks"),r=[];r=n?JSON.parse(n):[{id:1,description:"Task 1",done:!1},{id:2,description:"Task 2",done:!0}],setTimeout((function(){return e(r)}),C())})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(v.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=13;break}return e.next=3,fetch("".concat(w,"/tasks"),{body:JSON.stringify({description:t}),method:"POST",headers:{"Content-Type":"application/json"}});case 3:if((n=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,n.json();case 8:throw e.t1=e.sent.message,new e.t0(e.t1);case 10:return e.next=12,n.json();case 12:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",new Promise(function(){var e=Object(v.a)(k.a.mark((function e(n,r){var a,c,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:a=e.sent,c=0===a.length?1:Math.max.apply(Math,Object(g.a)(a.map((function(e){return e.id}))))+1,o={id:c,description:t,done:!1},a.unshift(o),D(a),setTimeout((function(){return n(o)}),C());case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(v.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=11;break}return e.next=3,fetch("".concat(w,"/tasks/").concat(t,"/toggle"),{method:"PATCH"});case 3:if((n=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,n.json();case 8:throw e.t1=e.sent.message,new e.t0(e.t1);case 10:return e.abrupt("return");case 11:return e.abrupt("return",new Promise(function(){var e=Object(v.a)(k.a.mark((function e(n,a){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:(c=e.sent).map((function(e){return e.id===t?Object(r.a)(Object(r.a)({},e),{},{done:!e.done}):e})),D(c),setTimeout((function(){return n()}),C());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(v.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=11;break}return e.next=3,fetch("".concat(w,"/tasks/").concat(t),{method:"DELETE"});case 3:if((n=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,n.json();case 8:throw e.t1=e.sent.message,new e.t0(e.t1);case 10:return e.abrupt("return");case 11:return e.abrupt("return",new Promise(function(){var e=Object(v.a)(k.a.mark((function e(n,r){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:a=e.sent,D(a.filter((function(e){return e.id!==t}))),setTimeout((function(){return n()}),C());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){localStorage.setItem("tasks",JSON.stringify(e))},P=(n(92),n(65)),F=function(e){return Object(a.jsx)(P.Flex,Object(r.a)(Object(r.a)({},e),{},{py:4,justifyContent:"center",sx:{backgroundColor:e.done?"success":"primary",transition:"background-color 0.25s"}}))},I=function(e){var t=e.uncompletedTasks;return Object(a.jsx)(F,{done:0===t,children:Object(a.jsxs)(P.Heading,{color:"white",as:"h4",children:["Tasks App (",t," tasks to do)"]})})},J=n(123),R=n(124),V=n(143),A=n(140),M=n(125),N=n(122),Q=n(127),W=n(126),B=n(142),H=n(49),K=n(50),U=n(58),q=n(57),z=Object(i.createContext)({theme:{},isDark:!1,isLoading:!1,showCompleted:!0,changeColor:function(){},toggleCompletedVisibility:function(){},showLoading:function(){},hideLoading:function(){}}),G=function(e){Object(U.a)(n,e);var t=Object(q.a)(n);function n(e){var r;return Object(H.a)(this,n),(r=t.call(this,e)).changeColor=function(){r.setState({isDark:!r.state.isDark})},r.toggleCompletedVisibility=function(){r.setState({showCompleted:!r.state.showCompleted})},r.showLoading=function(){r.setState({isLoading:!0})},r.hideLoading=function(){r.setState({isLoading:!1})},r.state={dark:{backgroundColor:"grey",color:"white"},light:{backgroundColor:"white",color:"black"},isDark:!1,isLoading:!1,showCompleted:!0},r}return Object(K.a)(n,[{key:"render",value:function(){var e=this.state.isDark?this.state.dark:this.state.light;return Object(a.jsx)(z.Provider,{value:Object(r.a)(Object(r.a)({},this.state),{},{theme:e,changeColor:this.changeColor,toggleCompletedVisibility:this.toggleCompletedVisibility,showLoading:this.showLoading,hideLoading:this.hideLoading}),children:this.props.children})}}]),n}(i.Component),X=n(81),Y=n(120),Z=n(138),$=function(){var e=Object(i.useContext)(z),t=Object(i.useState)(!0),n=Object(X.a)(t,2),r=n[0],c=n[1];return Object(a.jsx)(Y.a,{control:Object(a.jsx)(Z.a,{id:"chk-show",name:"chk-show",checked:r,onChange:function(t){return n=t.target.checked,e.toggleCompletedVisibility(),void c(n);var n},color:e.isDark?"secondary":"primary"}),label:"Show completed items"})},_=function(){var e,t=Object(i.useContext)(z),n=Object(i.useRef)(),r=Object(j.b)(),c=Object(B.a)("addTask",(function(e){return T(e)}),{onSuccess:function(){var e=Object(v.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.invalidateQueries("listTasks");case 2:n.current.value="",setTimeout((function(){n.current.focus()}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onError:function(){t.hideLoading()}}),o=c.mutate,s=c.isLoading,u=c.error,d=c.isError,l=c.reset;return Object(a.jsxs)(J.a,{container:!0,spacing:3,children:[Object(a.jsx)(J.a,{item:!0,xs:12,children:Object(a.jsxs)(R.a,{error:d,fullWidth:!0,variant:"outlined",children:[Object(a.jsx)(V.a,{htmlFor:"input-create",children:"Write a task and press ENTER"}),Object(a.jsx)(A.a,{id:"input-create",type:"text",inputRef:n,onKeyUp:function(e){return function(e){if("enter"===e.toLowerCase()){var r,a,c=null===(r=n.current)||void 0===r?void 0:r.value.trim();c&&(o(c),t.showLoading(),null===(a=n.current)||void 0===a||a.focus())}}(e.key)},disabled:s,autoComplete:"off",autoFocus:!0,endAdornment:(null===(e=n.current)||void 0===e?void 0:e.value)&&Object(a.jsx)(M.a,{position:"end",children:Object(a.jsx)(N.a,{disabled:s,onClick:function(){return function(){var e;n.current.value="",null===(e=n.current)||void 0===e||e.focus(),l()}()},children:Object(a.jsx)(W.a,{})})}),labelWidth:215}),u&&Object(a.jsx)(Q.a,{children:u+""})]})}),Object(a.jsx)(J.a,{item:!0,xs:12,children:Object(a.jsx)($,{})})]})},ee=n(128),te=n(129),ne=n(130),re=n(131),ae=n(132),ce=function(e){var t=e.task,n=Object(i.useContext)(z),r=Object(j.b)(),c=function(){var e=Object(v.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.invalidateQueries("listTasks");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){n.hideLoading()},s=Object(B.a)((function(e){return E(e)}),{onSuccess:c,onError:o}),u=s.mutate,d=s.isLoading,l=Object(B.a)((function(e){return S(e)}),{onSuccess:c,onError:o}),h=l.mutate,b=l.isLoading;return Object(a.jsxs)(ee.a,{button:!0,disabled:b||d,onClick:function(){n.showLoading(),h(t.id)},children:[Object(a.jsx)(te.a,{children:Object(a.jsx)(Z.a,{edge:"start",disabled:b||d,checked:t.done,disableRipple:!0})}),Object(a.jsx)(ne.a,{primary:t.description,style:{textDecorationLine:t.done?"line-through":"none"}}),Object(a.jsx)(re.a,{children:Object(a.jsx)(N.a,{edge:"end",onClick:function(){n.showLoading(),u(t.id)},disabled:d||b,children:Object(a.jsx)(ae.a,{})})})]})},oe=n(133),ie=n(134),se=n(135),ue=function(e){Object(U.a)(n,e);var t=Object(q.a)(n);function n(){var e;Object(H.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).context=void 0,e}return Object(K.a)(n,[{key:"render",value:function(){return Object(a.jsx)(z.Consumer,{children:function(e){return Object(a.jsx)(oe.a,{onClick:e.changeColor,startIcon:e.isDark?Object(a.jsx)(se.a,{}):Object(a.jsx)(ie.a,{}),children:e.isDark?"Dark":"Light"})}})}}]),n}(i.Component);ue.contextType=z;var de=function(e){return Object(a.jsx)(x.a,Object(r.a)(Object(r.a)({},e),{},{height:"100%",overflow:"auto"}))},le=function(){var e=Object(i.useContext)(z),t=Object(O.a)("listTasks",L,{staleTime:6e4,onSuccess:function(){e.hideLoading()},onError:function(){e.hideLoading()}}),n=t.isLoading,c=t.data;return Object(a.jsxs)(de,{style:Object(r.a)({},e.theme),children:[Object(a.jsx)(I,{uncompletedTasks:(c||[]).filter((function(e){return!e.done})).length}),Object(a.jsxs)(x.b,{width:["100%","90%"],flexDirection:"column",mx:"auto",p:3,children:[Object(a.jsx)(_,{}),Object(a.jsx)(f.a,{variant:"indeterminate",style:{visibility:e.isLoading||n?"visible":"hidden"}}),Object(a.jsx)(p.a,{children:(c||[]).filter((function(t){return e.showCompleted?t:!t.done})).map((function(e){return Object(a.jsx)(ce,{task:e},e.id)}))}),Object(a.jsx)(x.b,{justifyContent:"flex-end",mb:3,children:Object(a.jsx)(ue,{})})]})]})},je=(n(98),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,144)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))}),he=Object(r.a)(Object(r.a)({},o.a),{colors:Object(r.a)(Object(r.a)({},o.a.colors),{},{primary:"#2196f3",success:"#4caf50",danger:"#f44336"}),buttons:Object(r.a)(Object(r.a)({},o.a.buttons),{},{danger:{color:"white",bg:"danger"}})});console.log(he);var be=new l.a;d.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsxs)(j.a,{client:be,children:[Object(a.jsx)(G,{children:Object(a.jsx)(b.ThemeProvider,{theme:he,children:Object(a.jsx)(le,{})})}),Object(a.jsx)(h.ReactQueryDevtools,{initialIsOpen:!1})]})}),document.getElementById("root")),je()},92:function(e,t,n){},98:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.0f4e82e8.chunk.js.map